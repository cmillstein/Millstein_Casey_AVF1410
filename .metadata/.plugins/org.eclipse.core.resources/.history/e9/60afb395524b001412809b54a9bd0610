var url = "http://api.wunderground.com/api/4c3684666a48c28f/conditions/q/FL/Coconut_Creek.json";

var geoLocation = function(){
	Ti.Geolocation.purpose = "Your location is needed to gather lat/long coords."; 
	Ti.Geolocation.getCurrentPosition(function(e){
		var latitude = e.coords.latitude;
		var longitude = e.coords.longitude;
		var coordsLabel = Ti.UI.createLabel({
			color: '#fff',
			text: 'Latitude: ' + lat + ', Longitude: ' + lng,
			height: Ti.UI.SIZE,
			textAlign: 'center',
			font: {
				fontSize: '20dp',
				fontWeight: 'bold'
			}
		});
		myView.add(coordsLabel);  //myView would be a reference from app.js perhaps
	}); //getCurrentPosition closing
}; //runGeo closing
exports.geoLocation = runGeoCode;









var success = function(){
	//alert("Here is your data!"); decided not to use alert, got annoying
	var getData = JSON.parse(this.responseText);

var location = getData.current_observation.display_location.full;

var locationLabel = Ti.UI.createLabel({
	text: location,
	font: {fontSize: "24dp", fontWeight: "bold"},
	color: "#000000",
	top: "50%",
});

var temp = getData.current_observation.temp_f;

var tempLabel = Ti.UI.createLabel({
	text: temp + "Â°F",
	font: {fontSize: "16dp", fontWeight: "bold"},
	color: "#000000",
	top: "60%",
	textAlign: "center"
});

var wind = getData.current_observation.wind_string;

var windLabel = Ti.UI.createLabel({
	text: "The wind is currently heading \n" + wind,
	font: {fontSize: "16dp", fontWeight: "bold"},
	color: "#000000",
	top: "70%",
});

var weatherConditions = getData.current_observation.weather;

var weatherLabel = Ti.UI.createLabel({
	text: weatherConditions,
	font: {fontSize: "16dp", fontWeight: "bold"},
	color: "#000000",
	top: "80%",
	textAlign: "center"
});


var heatIndex = getData.current_observation.heat_index_f;

var heatIndexLabel = Ti.UI.createLabel({
	text: "The heat index for today is \n" + heatIndex,
	font: {fontSize: "16dp", fontWeight: "bold"},
	color: "#000000",
	top: "90%",
	textAlign: "center"

});

 
mainWin.add(heatIndexLabel);
mainWin.add(tempLabel);
mainWin.add(windLabel);
mainWin.add(weatherLabel);
mainWin.add(locationLabel);
};

var error = function(){
	alert("Oops, something went wrong!");
};


var client = Ti.Network.createHTTPClient({
	onload: success,
	onerror: error,
	timeout: 5000
});



client.open("GET", url);

client.send();
